<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui" lang="es">
    <h:head>
        <title>Log in</title>
        <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <!--===============================================================================================-->
    <link rel="icon" type="image/png" href="images/icons/favicon.ico"/>
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap.min.css"/>
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css"/>
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/animate/animate.css"/>
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/css-hamburgers/hamburgers.min.css"/>
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/select2/select2.min.css"/>
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="css/util.css"/>
    <link rel="stylesheet" type="text/css" href="css/main.css"/>
    <link rel="stylesheet" type="text/css" href="css/jquery.fancybox.css"/>
    <link rel="stylesheet" type="text/css" href="css/custom-fancy.css"/>
    <link rel="stylesheet" type="text/css" href="css/font-awesome.min.css"/>
    <!--===============================================================================================-->
    </h:head>
    <h:body>
        <div class="limiter">
            <div class="container-login100">
                <div class="wrap-login100">
                    <div class="login100-pic js-tilt" data-tilt="true">
                        <!--img src="images/img-01.png" alt="IMG"-->
                        <img src="images/rrhh.jpg" alt="IMG" style="border-radius: 8px;" id="logo"/>
                    </div>

                    <h:form class="login100-form validate-form first-step" >
                        <span class="login100-form-title">
                            Acceso de usuario
                        </span>

                        <div class="wrap-input100 validate-input" data-validate = "Por favor digite su nombre de usuario.">
                            <p:inputText value="#{sessionUser.tempSession.usCorreo}" class="input100" id="txtEmail" placeholder="Correo"/>
                                <span class="focus-input100"></span>
                                <span class="symbol-input100">
                                    <em class="fa fa-envelope" aria-hidden="true"></em>
                                </span>
                        </div>

                        <div class="wrap-input100 validate-input" data-validate = "Contraseña requerida.">
                            <p:password value="#{sessionUser.tempSession.usContra}" class="input100" placeholder="Contraseña"/>
                                <span class="focus-input100"></span>
                                <span class="symbol-input100">
                                    <em class="fa fa-lock" aria-hidden="true"></em>
                                </span>
                                
                                
                        </div>

                        <div class="container-login100-form-btn">
                            <p:commandButton class="login100-form-btn btn-first" value="Login" id="log" actionListener="#{sessionUser.validarUsuario()}"/>
                            <script>$('.login100-form-btn').removeClass('ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only ');
                            $('.btn-first').click(function(){
                                validateAlert();
                            });
                            </script>
                            <!--button class="login100-form-btn">
                                Login
                            </button-->
                        </div>

                        <div class="text-center p-t-12">
                            <span class="txt1">
                                Bienvenido a nuestro log in
                            </span>
                        </div>
                        <input type="text" name="log" value="true" style="display: none;"/>
                    </h:form>
                    
                    <h:form class="second-step">
                        
                        <span class="login100-form-title">
                            Código de verificación
                        </span>

                        <div class="wrap-input100 validate-input" data-validate = "Por favor digite su nombre de usuario.">
                            <p:inputText value="#{sessionUser.userResponse}" class="input100" id="txtEmail" placeholder="Digite el código"/>
                                <span class="focus-input100"></span>
                                <span class="symbol-input100">
                                    <em class="fa fa-code" aria-hidden="true"></em>
                                </span>
                                <script>$('.input100').removeClass('ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all');</script>
                        </div>
                        <div class="container-login100-form-btn">
                            <p:commandButton class="login100-form-btn" value="Confirmar" actionListener="#{sessionUser.validarCodigo()}"/>
                            <script>$('.login100-form-btn').removeClass('ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only ');
                                $('.second-step').hide();
                            </script>
                        </div>
                        <div class="text-center p-t-12">
                            <span class="txt1">
                                Este paso es necesario por seguridad
                            </span>
                        </div>
                    </h:form>
                </div>
            </div>
        </div>

        <div style="display: none;" id="animatedModal" class="animated-modal">
            <h4 class='card-title'>Bienvenidos a mi RRHHSystems <em class="fas fa-toolbox"></em></h4>
            <br/>
            <div>
                <p>
                    <strong>Mantenimiento</strong>
                    <strong>Gestionar</strong>
                    <br/>
                    Planillas,empelados, usuarios, roles y mucho más.
                    <br/>
                    <strong>Reporteria.</strong>
                    <br/>
                    Puedes generar reportes de las tablas que necesitas.
                </p>
            </div>
        </div>

        <button class="login100-form-btn" data-fancybox="true" data-animation-duration="700" data-src="#animatedModal" href="javascript:;" id="info" style="display:none;">
            Más información &nbsp;&nbsp;<em class="fas fa-smile-beam"></em>
        </button>

        <!--===============================================================================================-->
        <script src="vendor/jquery/jquery-3.2.1.min.js"></script>
        <!--===============================================================================================-->
        <script src="vendor/bootstrap/js/popper.js"></script>
        <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
        <!--===============================================================================================-->
        <script src="vendor/select2/select2.min.js"></script>
        <!--===============================================================================================-->
        <script src="vendor/tilt/tilt.jquery.min.js"></script>
        <script >
            $('.js-tilt').tilt({
                scale: 1.1
            })
            let alert;
            let validateAlert=()=>{
                alert = Swal.fire({
                    type:'info',
                    title:'Validando usuario',
                    showConfirmButton:false,
                    closeOnClickOutside: false,
                    closeOnEsc: false,
                    allowOutsideClick: false,
                    onBeforeOpen: () => {
                        Swal.showLoading()
                        timerInterval = setInterval(() => {
                            const content = Swal.getContent()
                            if (content) {
                                const b = content.querySelector('b')
                                /*if (b) {
                                    b.textContent = Swal.getTimerLeft()
                                } */  
                            }
                        }, 100)
                    }
                });
            }
            
            
            let alertFail=()=>{
                alert.close();
                const Toast = Swal.mixin({
                    toast: true,
                    position: 'top-end',
                    showConfirmButton: false,
                    timer: 5000,
                    timerProgressBar: true,
                    onOpen: (toast) => {
                        toast.addEventListener('mouseenter', Swal.stopTimer)
                        toast.addEventListener('mouseleave', Swal.resumeTimer)
                    }
                })

                Toast.fire({
                    icon: 'warning',
                    title:'Usuario o contraseña incorrectos.',
                    text:'Por favor verifique los datos de inicio de sesión, e intente de nuevo.'
                })
            }
            
            let simpleAlert=(type,title,text)=>{
                Swal.fire({
                    icon:type,
                    title:title,
                    text:text
                });
            }
        </script>
        <!--===============================================================================================-->
        <script src="js/main.js"></script>
        <script src="js/jquery.fancybox.js"></script>
        <script src='https://cdn.jsdelivr.net/npm/sweetalert2@9'></script>
        <script src="js/sweetalert2.all.min.js"></script>
        <script src="js/all.js"></script>
        <script src="js/custom/login.js"></script>
    </h:body>
</html>

